<!DOCTYPE html>
<html>
  <head>
  <title>CLASSIQUE</title>
  <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  <script src='js/slate.min.js'></script>
  <style>
  .title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  </style>
  </head>

  <body>
    <h1 class='title'>Classique Configuration</h1>
    
    
    <div class="item-container">
      <div class="item-container-header">Lower display</div>
      <div class="item-container-content">
        <label class="item">
          Content
            <select name="lower-display-select" id="lower_display_select" class="item-select">
              <option class="item-select-option">Steps (numeric)</option>
              <option class="item-select-option" selected>Battery (numeric)</option>
              <option class="item-select-option">Battery (bar)</option>
            </select>
    </label>
      </div>
    </div>
    
    <div class="item-container">
      <div class="item-container-content">
        <div class="item">
          Classique will always be free and will never have features taken away. 
          But if you want to support me, the developer, and in return get loads 
          of customisation options, you can download Classique Exclusive Edition from
          the Pebble App Store!
        </div>
      </div>
    </div>

    
  </body>
  <script>
  function getConfigData() {
    var LowerDisplaySelect = document.getElementById('lower_display_select');
 
    var options = {
      'lower_display': LowerDisplaySelect.value
    };
    // Save for next launch
    localStorage['lower_display'] = options['lower_display'];
    console.log('Got options: ' + JSON.stringify(options));
    return options;
  }
  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }
 
  var submitButton = document.getElementById('submit_button');
  submitButton.addEventListener('click', function() {
    console.log('Submit');
    // Set the return URL depending on the runtime environment
    var return_to = getQueryParam('return_to', 'pebblejs://close#');
    document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
  });
  (function() {
    var LowerDisplaySelect = document.getElementById('lower_display');
    // Load any previously saved configuration, if available
    if(localStorage['lower_display']) {  LowerDisplaySelect.value = JSON.parse(localStorage['lower_display']); }
  })();
  </script>
</html>
